<my-simple-navbar [navTitle]="'Article'" [backRoute]="['/library', publication]" [navButtons]="navButtons" (handler)="commandHandler($event)">
</my-simple-navbar>

<div class="container">
  <my-dict-popover *ngIf="popoverInput" [input]="popoverInput" (shouldHide)="hidePopover()" (wordSearch)="wordSearch($event)" (speakWord)="speakWord($event)">
  </my-dict-popover>
  <my-hashtag-popover *ngIf="hashTag" [hashTag]="hashTag" [publication]="publication" [chapter]="chapter" (shouldHide)="hidePopover()">
  </my-hashtag-popover>

  <div class="row">
    <div class="col-lg-8 offset-lg-2 col-xs-12">
      <div *ngIf="article" class="p-2" [ngClass]="articleClass" [ngStyle]="{'text-align': article.baseLang === 'ar' ? 'right' : 'left'}">
        <div class="my-fade-in" [ngClass]="{'my-hide': scrollState === 'busy'}">
          <my-article-core [article]="article" [hashTag]="tag" (clicked)="onClick($event)" (anchors)="acceptAnchors($event)"></my-article-core>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="sidepanel.isopen" class="my-modal-overlay"></div>

<my-sidepanel *ngIf="sidepanel.isopen" [location]="'right'" [title]="'Article Menu'" (shouldHide)="sidepanel.isopen = false">
  <div class="sidepanel-nav-container">
    <div class="btn-group mt-1" role="group" aria-label="Supplementary article actions">
      <button *ngIf="hasFlashCards" type="button" class="btn btn-secondary" (click)="commandHandler('flashcards')"><i class="fa fa-fw fa-graduation-cap"></i></button>
      <button type="button" class="btn btn-secondary" (click)="commandHandler('toggleSpeech')"><i class="fa fa-fw" [ngClass]="speechService.speechEnabled ? 'fa-volume-up' : 'fa-volume-off'"></i></button>
      <button type="button" class="btn btn-secondary" (click)="commandHandler('allTags')"><i class="fa fa-fw fa-hashtag"></i></button>
    </div>
  </div>
  <hr>
  <div class="m-1">
    <h3>Table of Contents</h3>
    <ul class="nav">
      <li class="nav-item" *ngFor="let anchor of anchors">
        <a class="nav-link anchor-link text-primary" (click)="jumpToAnchor(anchor.name)">{{anchor.title}}</a>
      </li>
    </ul>
  </div>
</my-sidepanel>